(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1668:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return et}});var r=e(9499),i=e(29),c=e(2640),o=e(7794),a=e.n(o),s=e(9008),u=e.n(s),l=e(7294),d=e(57),h=e(8718),f=e.n(h),p=e(2777),m=e(2262),Z=e(2902),g=function(){function t(n){(0,p.Z)(this,t),(0,r.Z)(this,Z.sc,!0),Object.assign(this,n)}return(0,m.Z)(t,[{key:"apply",value:function(t){var n=Math.floor(t/this.qtyRequirement);return t>=this.qtyRequirement?n*this.amount:0}}]),t}(),y=function t(n){(0,p.Z)(this,t),(0,r.Z)(this,Z.sc,!0),Object.assign(this,n)};function v(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function b(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?v(Object(e),!0).forEach((function(n){(0,r.Z)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var O={data:[{id:1,name:"Face Mask",thumbnail:"/facemask.jpg",cost:2.5,discounts:[{qtyRequirement:2,amount:1,text:"Two Face Masks for \xa34"}]},{id:2,name:"Toilet Roll",thumbnail:"/toiletroll.jpg",cost:.65,discounts:[{qtyRequirement:6,amount:.65,text:"Six rolls of toilet paper for the price of five"}]}]},w={get:function(){return new Promise((function(t,n){setTimeout((function(){var n=O.data.map((function(t){var n=t.discounts.map((function(t){return new g(t)}));return new y(b(b({},t),{},{discounts:n}))}));t({data:n})}),1e3)}))}},j=e(5675),x=e.n(j),k=e(5113),P=e(1329),B=e(6740),_=e.n(B),q=function(t){return function(t){return _()(t,{symbol:"\xa3",separator:","})}(t)},X=e(5944);var C={name:"bcffy2",styles:"display:flex;align-items:center;justify-content:space-between"},E={name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"},I={name:"13xco7d",styles:"font-size:14px;text-align:right"},S=function(t){var n=t.id,e=t.name,r=t.thumbnail,i=t.cost,c=t.discounts,o=t.onChange;return(0,X.BX)(k.Z,{sx:{width:"100%",padding:"20px 20px"},elevation:2,children:[(0,X.BX)("div",{css:C,children:[(0,X.tZ)(x(),{src:r,alt:e,height:100,width:100}),(0,X.tZ)("span",{children:e}),(0,X.tZ)("span",{children:q(i).format()}),(0,X.BX)("div",{css:E,children:[(0,X.tZ)(P.Z,{onClick:function(){return o(n,1)},children:"Add to cart"}),(0,X.tZ)(P.Z,{onClick:function(){return o(n,-1)},color:"error",children:"Remove item"})]})]}),c&&c.map((function(t){return(0,X.tZ)("div",{css:I,children:(0,X.BX)("i",{children:["Special offer: ",t]})},t)}))]})};var D={name:"w9uwcu",styles:"list-style:none;padding-left:0;li{margin-bottom:20px;}width:100%"},N=function(t){var n=t.products,e=t.onChange;return(0,X.tZ)("ul",{css:D,children:n.map((function(t){var n=t.id,r=t.name,i=t.thumbnail,c=t.cost,o=t.discounts;return(0,X.tZ)("li",{children:(0,X.tZ)(S,{id:n,name:r,thumbnail:i,cost:c,onChange:e,discounts:o})},n)}))})},T=e(7906),R=e(295),A=e(3252),z=e(2882),M=e(3184),Q=e(3816),F=e(4661),H=function(t){var n=t.items,e=function(t,n){return t*n},r=n.reduce((function(t,n){var r=n.qty,i=n.cost,c=n.discount;return t+(e(r,i)-c)}),0);return(0,X.tZ)(z.Z,{component:k.Z,children:(0,X.BX)(T.Z,{"aria-label":"shopping basket",children:[(0,X.tZ)(M.Z,{children:(0,X.BX)(Q.Z,{children:[(0,X.tZ)(A.Z,{children:"Item"}),(0,X.tZ)(A.Z,{align:"right",children:"Unit Cost"}),(0,X.tZ)(A.Z,{align:"right",children:"Total Cost"}),(0,X.tZ)(A.Z,{align:"right",children:"Discount"})]})}),(0,X.tZ)(R.Z,{children:n.map((function(t){var n=t.id,r=t.qty,i=t.name,c=t.cost,o=t.discount;return(0,X.BX)(Q.Z,{children:[(0,X.BX)(A.Z,{children:[r," ",i]}),(0,X.tZ)(A.Z,{align:"right",children:q(c).format()}),(0,X.tZ)(A.Z,{align:"right",children:q(e(r,c)).format()}),(0,X.tZ)(A.Z,{align:"right",children:q(o).format()})]},n)}))}),(0,X.tZ)(F.Z,{sx:{td:{fontSize:"0.875rem",fontWeight:"bold"}},children:(0,X.BX)(Q.Z,{children:[(0,X.tZ)(A.Z,{colSpan:3,children:"Total to pay:"}),(0,X.tZ)(A.Z,{align:"right",children:q(r).format()})]})})]})})};var L={name:"1x17g94",styles:"display:flex;align-items:center;width:100%"},U={name:"1nhsvq6",styles:"font-weight:normal;margin-right:20px"},W={name:"a5no27",styles:"border:none;background:#9c9c9c;height:1px;width:100%;margin-top:14px"},Y=function(t){var n=t.name;return(0,X.BX)("div",{css:L,children:[(0,X.tZ)("h2",{css:U,children:n}),(0,X.tZ)("hr",{css:W})]})},G=function(){function t(n){(0,p.Z)(this,t),(0,r.Z)(this,Z.sc,!0),Object.assign(this,n)}return(0,m.Z)(t,[{key:"discount",get:function(){var t=this,n=this.product.discounts.map((function(n){return n.apply(t.qty)}));return n.length>0?n[0]:0}}]),t}(),J=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]};(0,p.Z)(this,t),(0,r.Z)(this,Z.sc,!0),Object.assign(this,n)}return(0,m.Z)(t,[{key:"findProduct",value:function(t){return this.items.find((function(n){return n.product.id===t}))}},{key:"findProductIndex",value:function(t){return this.items.findIndex((function(n){return n.product.id===t}))}},{key:"addItem",value:function(t,n){if(!(n<1)){var e=new G({product:t,qty:n});this.items.push(e)}}},{key:"deleteItem",value:function(t){var n=this.findProductIndex(t);this.items.splice(n,1)}},{key:"updateItemQty",value:function(t,n){var e=this.findProduct(t);e&&(e.qty+=n,e.qty<=0&&this.deleteItem(t))}}]),t}(),K=J,V=e(7160),$=e.n(V);function tt(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function nt(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?tt(Object(e),!0).forEach((function(n){(0,r.Z)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):tt(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var et=function(){var t=(0,d.x)(!1),n=(0,c.Z)(t,2),e=n[0],r=n[1],o=(0,d.x)(null),s=(0,c.Z)(o,2),h=s[0],p=s[1],m=(0,d.x)(new K),Z=(0,c.Z)(m,2),g=Z[0],y=Z[1];(0,l.useEffect)((function(){var t=function(){var t=(0,i.Z)(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.get();case 3:n=t.sent,p(n.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r(!0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[r,p]);var v=function(t,n){y((function(e){var r=h.find((function(n){return n.id===t}));r&&0!==n&&(e.findProduct(t)?e.updateItemQty(t,n):e.addItem(r,n))}))},b=g.items.map((function(t){var n=t.qty,e=t.product,r=t.discount;return nt(nt({qty:n},f()(e,["id","name","cost"])),{},{discount:r})}));return(0,X.BX)("div",{className:$().container,children:[(0,X.BX)(u(),{children:[(0,X.tZ)("title",{children:"Shopping Basket App"}),(0,X.tZ)("meta",{name:"description",content:"A shopping basket app built with Nextjs"}),(0,X.tZ)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,X.BX)("main",{className:$().main,children:[(0,X.tZ)("h1",{children:"Shopping Basket App"}),(0,X.BX)("section",{"data-id":"products",children:[(0,X.tZ)(Y,{name:"Products"}),function(){if(e)return(0,X.tZ)("p",{children:"Error!"});if(!h)return(0,X.tZ)("p",{children:"Loading..."});var t=h.map((function(t){return nt(nt({},f()(t,["id","name","thumbnail","cost"])),{},{discounts:t.discounts.map((function(t){return t.text}))})}));return(0,X.tZ)(N,{products:t,onChange:v})}()]}),(0,X.BX)("section",{children:[(0,X.tZ)(Y,{name:"Basket"}),(0,X.tZ)(H,{items:b})]})]})]})}},8312:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(1668)}])},7160:function(t){t.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ"}}},function(t){t.O(0,[385,774,888,179],(function(){return n=8312,t(t.s=n);var n}));var n=t.O();_N_E=n}]);